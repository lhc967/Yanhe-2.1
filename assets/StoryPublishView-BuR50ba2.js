import{_ as V,u as I,c as p,d as s,t as a,n as _,D as h,F as b,H as L,I as B,f as v,$ as g,E as r,p as E,r as m,g as R,h as z,i as c}from"./index-CVi_qNo8.js";const D={class:"publish-paper-page"},F={class:"paper-nav"},O={class:"nav-title"},P=["disabled"],S={class:"seal-text"},j={class:"desk-container"},M={class:"material-board"},N={key:0,class:"preview-wrap"},x=["src"],A={class:"change-tip"},H={key:1,class:"placeholder"},q={class:"writing-paper"},G={class:"paper-lines"},J={class:"input-row title-row"},K=["placeholder"],Q=["title"],W={class:"input-row content-row"},X=["placeholder"],Y={class:"meta-section"},Z={class:"meta-label"},ss={class:"tags-cloud"},es=["onClick"],ts={class:"meta-section"},is={class:"left"},ls={class:"right"},as={__name:"StoryPublishView",setup(os){const{t:o,locale:d}=I(),f=z(),u=m(null),n=m(""),i=R({title:"",content:"",location:"",tags:[]}),k=E(()=>n.value&&i.title&&i.content),$=()=>u.value.click(),w=e=>{const t=e.target.files[0];t&&(n.value=URL.createObjectURL(t))},C=e=>{if(i.tags.includes(e))i.tags=i.tags.filter(t=>t!==e);else{if(i.tags.length>=3)return r.warning(o("publish_paper.msg_max_tags"));i.tags.push(e)}},y=()=>{i.location=o("publish_paper.loc_finding"),setTimeout(()=>{i.location=d.value==="en"?"China · Beijing":"中国 · 北京"},1e3)},T=()=>{if(!i.title)return r.warning(o("publish_paper.msg_no_title"));const e=g.service({text:o("publish_paper.ai_processing"),background:"rgba(255,255,255,0.8)"});setTimeout(()=>{e.close();const t=(d.value==="en","✨ "),l=d.value==="en"?" | Oriental Aesthetics":" | 东方美学惊艳时刻";i.title=`${t}${i.title}${l}`,r.success(o("publish_paper.msg_ai_done"))},1e3)},U=()=>{const e=g.service({text:o("publish_paper.publishing"),background:"rgba(255,255,255,0.8)"});setTimeout(()=>{e.close(),r.success(o("publish_paper.msg_success")),f.push("/story")},1500)};return(e,t)=>(c(),p("div",D,[s("nav",F,[s("a",{class:"nav-text cancel",onClick:t[0]||(t[0]=l=>e.$router.back())},a(e.$t("publish_paper.nav.cancel")),1),s("span",O,a(e.$t("publish_paper.nav.title")),1),s("button",{class:"nav-btn-publish",disabled:!k.value,onClick:U},[s("span",S,a(e.$t("publish_paper.nav.publish")),1)],8,P)]),s("div",j,[s("div",M,[s("div",{class:_(["upload-zone",{"has-file":n.value}]),onClick:$},[s("input",{type:"file",ref_key:"fileInput",ref:u,hidden:"",onChange:w,accept:"image/*,video/*"},null,544),n.value?(c(),p("div",N,[s("img",{src:n.value,class:"preview-img"},null,8,x),s("div",A,a(e.$t("publish_paper.upload.change")),1)])):(c(),p("div",H,[t[3]||(t[3]=s("div",{class:"ink-circle"},[s("i",{class:"bi bi-image"})],-1)),s("p",null,a(e.$t("publish_paper.upload.placeholder")),1)]))],2)]),s("div",q,[s("div",G,[s("div",J,[h(s("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.title=l),placeholder:e.$t("publish_paper.form.title_ph"),class:"ink-input title"},null,8,K),[[b,i.title]]),s("button",{class:"ai-polish-btn",onClick:T,title:e.$t("publish_paper.form.ai_btn")},[...t[4]||(t[4]=[s("i",{class:"bi bi-magic"},null,-1)])],8,Q)]),s("div",W,[h(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.content=l),placeholder:e.$t("publish_paper.form.content_ph"),rows:"8",class:"ink-textarea"},null,8,X),[[b,i.content]])]),s("div",Y,[s("div",Z,a(e.$t("publish_paper.form.topic_label")),1),s("div",ss,[(c(!0),p(L,null,B(e.$tm("publish_paper.tags"),l=>(c(),p("span",{key:l,class:_(["ink-pill",{selected:i.tags.includes(l)}]),onClick:ns=>C(l)}," # "+a(l),11,es))),128))])]),s("div",ts,[s("div",{class:"meta-row",onClick:y},[s("div",is,[t[5]||(t[5]=s("i",{class:"bi bi-geo-alt"},null,-1)),v(" "+a(e.$t("publish_paper.form.loc_label")),1)]),s("div",ls,[v(a(i.location||e.$t("publish_paper.form.loc_ph"))+" ",1),t[6]||(t[6]=s("i",{class:"bi bi-chevron-right"},null,-1))])])])])])])]))}},cs=V(as,[["__scopeId","data-v-aa8dd479"]]);export{cs as default};
