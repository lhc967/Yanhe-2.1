import{_ as E,u as I,a as W,L as X,o as q,c as d,d as s,t as e,n as h,e as D,l as w,f as b,H as O,I as P,C,j as x,k as J,T as N,r as p,p as m,h as A,i as c,w as $}from"./index-CVi_qNo8.js";const F={class:"floating-nav"},R={class:"nav-left"},U={class:"brand"},j={class:"cn"},Y={class:"en"},G={class:"nav-right"},K=["src"],Q={class:"scroll-container",ref:"scrollContainer"},Z={class:"intro-card"},ss={class:"vertical-text"},ls=["innerHTML"],is=["onClick"],ts={class:"card-visual"},es=["src"],as={class:"ai-culture-tag"},ns={class:"card-info"},os={class:"title"},rs={class:"meta"},us={class:"author"},ds=["onClick"],cs={class:"dashed-box"},vs={class:"progress-bar-wrapper"},ps={class:"progress-line"},gs={key:0,class:"location-indicator"},hs={class:"ink-btn"},bs={class:"btn-label"},ms={class:"publish-content"},fs={class:"options-grid"},ks={__name:"StoryView",setup(_s){const{t:y,locale:o}=I(),r=A(),L=W(),f=m(()=>o.value==="en"),a=p(!1),u=p(0),n=p(2e3),v=p([]),k=()=>{const i=o.value==="en";v.value=[{id:1,title:i?"Hongcun after rain, ink painting alike":"雨后的宏村，简直就是水墨画本人",aiTag:i?"Hui Architecture":"徽派建筑 · 马头墙",image:"https://images.unsplash.com/photo-1629737976779-797740f93026?w=600&q=80",user:"Traveler_Lee",location:i?"Anhui · Hongcun":"安徽·宏村",isLiked:!1},{id:2,title:i?"Cycling on Xi'an City Wall":"在西安城墙骑车，触摸六百年的历史",aiTag:i?"Ming Dynasty Wall":"明代城墙 · 历史",image:"https://images.unsplash.com/photo-1572076936302-34947932607e?w=600&q=80",user:"Jack_On_Tour",location:i?"Shaanxi · Xi'an":"陕西·西安",isLiked:!0},{id:3,title:i?"Sichuan Opera Face Changing!":"第一次看川剧变脸，太神奇了！",aiTag:i?"Intangible Heritage":"非遗 · 川剧",image:"https://images.unsplash.com/photo-1544243399-63a232f0c766?w=600&q=80",user:"Sarah_Vlogs",location:i?"Sichuan · Chengdu":"四川·成都",isLiked:!1},{id:4,title:i?"Jingdezhen Porcelain Market":"景德镇陶瓷市集，器物之魂",aiTag:i?"Capital of Porcelain":"瓷都 · 匠人",image:"https://images.unsplash.com/photo-1599707367072-cd6ad66acc40?w=600&q=80",user:"Art_Fan",location:i?"Jiangxi · Jingdezhen":"江西·景德镇",isLiked:!1},{id:5,title:i?"The Bund at night, Cyberpunk!":"上海外滩的夜景，Cyberpunk!",aiTag:i?"Modern Skyline":"现代 · 天际线",image:"https://images.unsplash.com/photo-1548593444-406735c02604?w=600&q=80",user:"City_Boy",location:i?"Shanghai · Bund":"上海·外滩",isLiked:!1}]};X(o,k);const T=m(()=>Math.min(u.value/n.value*100,100)),_=m(()=>{const i=Math.floor(u.value/340);return i>=0&&i<v.value.length?v.value[i].location:y("culture_scroll.location_default")}),S=i=>{if(window.innerWidth>768){i.preventDefault();let l=u.value+i.deltaY;l<0&&(l=0),l>n.value&&(l=n.value),u.value=l}},M=i=>{i.isLiked=!i.isLiked},z=()=>{o.value=o.value==="zh"?"en":"zh"},H=i=>r.push(`/story/${i.id}`),V=i=>r.push(i),g=i=>{a.value=!1,i==="ai"?r.push("/story/ai"):i==="write"?r.push("/story/write"):r.push("/story/publish")};return q(()=>{k(),n.value=5*360+600-window.innerWidth,n.value<0&&(n.value=0)}),(i,l)=>(c(),d("div",{class:"culture-scroll-page",onWheel:S},[s("nav",F,[s("div",R,[s("button",{class:"nav-btn back-home",onClick:l[0]||(l[0]=t=>V("/portal"))},[l[9]||(l[9]=s("i",{class:"bi bi-arrow-left"},null,-1)),s("span",null,e(i.$t("culture_scroll.nav_back")),1)]),l[10]||(l[10]=s("div",{class:"vertical-divider"},null,-1)),s("div",U,[s("span",j,e(i.$t("brand")),1),s("span",Y," · "+e(i.$t("culture_scroll.brand_sub")),1)])]),s("div",G,[s("div",{class:"lang-switch",onClick:z},[s("span",{class:h({active:!f.value})},"中",2),s("span",{class:h({active:f.value})},"En",2)]),s("div",{class:"user-avatar",onClick:l[1]||(l[1]=t=>i.$router.push("/user/profile"))},[s("img",{src:D(L).userInfo.avatar||"https://api.dicebear.com/7.x/avataaars/svg?seed=User",alt:"User"},null,8,K)])])]),l[21]||(l[21]=s("div",{class:"ink-bg"},[s("div",{class:"smoke smoke-1"}),s("div",{class:"smoke smoke-2"})],-1)),s("div",Q,[s("div",{class:"scroll-track",style:w({transform:`translateX(${-u.value}px)`})},[s("div",Z,[s("div",ss,[s("h1",null,e(i.$t("culture_scroll.intro.title")),1),s("p",{innerHTML:i.$t("culture_scroll.intro.desc")},null,8,ls)]),l[11]||(l[11]=s("div",{class:"scroll-tip"},[s("i",{class:"bi bi-mouse"}),b(),s("span",null,"SCROLL TO EXPLORE")],-1))]),(c(!0),d(O,null,P(v.value,(t,ws)=>(c(),d("div",{key:t.id,class:"story-card-3d",onClick:B=>H(t)},[s("div",ts,[s("img",{src:t.image,loading:"lazy"},null,8,es),l[13]||(l[13]=s("div",{class:"card-overlay"},null,-1)),s("div",as,[l[12]||(l[12]=s("i",{class:"bi bi-stars text-warning"},null,-1)),b(" "+e(t.aiTag),1)])]),s("div",ns,[s("h3",os,e(t.title),1),s("div",rs,[s("span",us,"@"+e(t.user),1),s("div",{class:"seal-btn",onClick:$(B=>M(t),["stop"])},[s("div",{class:h(["seal-mark",{stamped:t.isLiked}])},e(t.isLiked?i.$t("culture_scroll.seal.liked"):i.$t("culture_scroll.seal.like")),3)],8,ds)])])],8,is))),128)),s("div",{class:"publish-card-end",onClick:l[2]||(l[2]=t=>a.value=!0)},[s("div",cs,[l[14]||(l[14]=s("i",{class:"bi bi-feather fs-1 mb-3"},null,-1)),s("h3",null,e(i.$t("culture_scroll.end_card.title")),1),s("p",null,e(i.$t("culture_scroll.end_card.desc")),1)])])],4)],512),s("div",vs,[s("div",ps,[s("div",{class:"progress-fill",style:w({width:T.value+"%"})},null,4)]),_.value?(c(),d("div",gs,[l[15]||(l[15]=s("i",{class:"bi bi-geo-alt-fill text-danger"},null,-1)),b(" "+e(_.value),1)])):C("",!0)]),s("div",{class:"fixed-publish-btn",onClick:l[3]||(l[3]=t=>a.value=!0)},[s("div",hs,[l[16]||(l[16]=s("i",{class:"bi bi-pen-fill"},null,-1)),s("span",bs,e(i.$t("culture_scroll.fab_write")),1)])]),x(N,{name:"fade"},{default:J(()=>[a.value?(c(),d("div",{key:0,class:"publish-modal",onClick:l[8]||(l[8]=$(t=>a.value=!1,["self"]))},[s("div",ms,[s("button",{class:"close-btn",onClick:l[4]||(l[4]=t=>a.value=!1)},[...l[17]||(l[17]=[s("i",{class:"bi bi-x-lg"},null,-1)])]),s("h2",null,e(i.$t("culture_scroll.modal.title")),1),s("div",fs,[s("div",{class:"opt",onClick:l[5]||(l[5]=t=>g("ai"))},[l[18]||(l[18]=s("div",{class:"icon-circle ai-bg"},[s("i",{class:"bi bi-stars"})],-1)),s("span",null,e(i.$t("culture_scroll.modal.opt_ai")),1)]),s("div",{class:"opt",onClick:l[6]||(l[6]=t=>g("photo"))},[l[19]||(l[19]=s("div",{class:"icon-circle photo-bg"},[s("i",{class:"bi bi-image"})],-1)),s("span",null,e(i.$t("culture_scroll.modal.opt_photo")),1)]),s("div",{class:"opt",onClick:l[7]||(l[7]=t=>g("write"))},[l[20]||(l[20]=s("div",{class:"icon-circle write-bg"},[s("i",{class:"bi bi-journal-richtext"})],-1)),s("span",null,e(i.$t("culture_scroll.modal.opt_write")),1)])])])])):C("",!0)]),_:1})],32))}},$s=E(ks,[["__scopeId","data-v-1c9352ef"]]);export{$s as default};
