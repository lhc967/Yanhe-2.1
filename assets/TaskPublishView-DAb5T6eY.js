import{_ as F,u as M,c as n,d as s,w as P,f as b,t as l,j as u,k as w,T as j,C as p,r as k,m as _,p as N,E as v,g as B,h as D,i as d,H as E,I,D as a,X as q,F as m,n as $,a1 as z,V as R}from"./index-CVi_qNo8.js";const A={class:"publish-page"},H={class:"navbar fixed-top navbar-custom px-4"},L={class:"container-fluid"},X={class:"text-muted small"},G={class:"publish-container pb-5 mb-5"},J={class:"mb-4 px-2"},O={key:"step1"},Q={class:"form-card"},W={class:"fw-bold mb-4"},Y={class:"mb-4"},Z={class:"section-label"},K={class:"row g-2"},ss=["id","value"],es=["for"],ts={class:"mb-4"},ls={class:"section-label"},os=["placeholder"],is={class:"mb-4"},ns={class:"section-label"},ds=["placeholder"],as={class:"mb-0"},cs={class:"section-label"},rs={class:"upload-zone"},us={class:"mb-0 mt-2 text-muted small"},bs={key:"step2"},ps={class:"form-card"},ms={class:"fw-bold mb-4"},hs={class:"row g-3"},_s={class:"col-md-6"},vs={class:"d-flex align-items-center gap-3"},fs={class:"fw-bold"},gs={class:"small text-muted"},ws={key:0,class:"bi bi-check-circle-fill check-icon"},ks={class:"col-md-6"},$s={class:"d-flex align-items-center gap-3"},ys={class:"fw-bold"},Vs={class:"small text-muted"},xs={key:0,class:"bi bi-check-circle-fill check-icon"},Cs={class:"form-card"},Us={class:"fw-bold mb-4"},Ts={key:0},Ss={class:"mb-3"},Fs={class:"section-label"},Ms={class:"form-text"},Ps={key:1},js={class:"alert alert-warning border-warning bg-warning bg-opacity-10 mb-4"},Ns={class:"row g-3 mb-3"},Bs={class:"col-md-6"},Ds={class:"section-label"},Es={class:"col-md-6"},Is={class:"section-label"},qs={value:"5"},zs={class:"bg-light p-3 rounded mb-3 border"},Rs={class:"d-flex justify-content-between mb-2"},As={class:"fw-bold"},Hs={class:"text-muted fw-normal small"},Ls={class:"d-flex justify-content-between text-danger"},Xs={class:"fw-bold"},Gs={class:"row g-3 mb-3"},Js={class:"col-md-6"},Os={class:"section-label"},Qs={class:"form-check form-switch mb-3"},Ws={class:"form-check-label fw-bold",for:"urgentSwitch"},Ys={class:"form-check form-switch"},Zs={class:"form-check-label fw-bold",for:"expertSwitch"},Ks={key:0,class:"footer-action"},se={class:"container d-flex justify-content-between align-items-center",style:{"max-width":"800px"}},ee={class:"small text-muted"},te={class:"price-display"},le=["disabled"],oe={key:0,class:"spinner-border spinner-border-sm me-2"},ie={__name:"TaskPublishView",setup(ne){const{t:h}=M(),y=D(),c=k(0),r=k(!1),V=["translation","dubbing","polish","custom"],o=B({category:"translation",title:"",desc:"",mode:"normal",budget:500,maxPeople:5,deadline:"",isUrgent:!1}),f=N(()=>{let e=o.budget||0;return o.isUrgent&&(e+=20),e}),x=()=>{if(!o.title)return v.warning(h("publish.msg_title_required"));c.value=1,window.scrollTo(0,0)},C=()=>{if(o.budget<=0)return v.warning(h("publish.msg_budget_invalid"));r.value=!0,setTimeout(()=>{r.value=!1,v.success(h("publish.msg_success")),y.push({path:"/checkout",query:{type:"task",amount:f.value}})},1e3)};return(e,t)=>{const g=_("el-step"),U=_("el-steps"),T=_("el-date-picker");return d(),n("div",A,[s("nav",H,[s("div",L,[s("a",{class:"navbar-brand d-flex align-items-center",onClick:t[0]||(t[0]=P(i=>e.$router.go(-1),["prevent"])),href:"#"},[t[12]||(t[12]=s("i",{class:"bi bi-x-lg text-secondary me-3 cursor-pointer"},null,-1)),b(" "+l(e.$t("publish.nav_title")),1)]),s("span",X,l(e.$t("publish.nav_subtitle")),1)])]),s("div",G,[s("div",J,[u(U,{active:c.value,"finish-status":"success","align-center":""},{default:w(()=>[u(g,{title:e.$t("publish.steps.desc")},null,8,["title"]),u(g,{title:e.$t("publish.steps.budget")},null,8,["title"])]),_:1},8,["active"])]),u(j,{name:"fade",mode:"out-in"},{default:w(()=>[c.value===0?(d(),n("div",O,[s("div",Q,[s("h5",W,"1. "+l(e.$t("publish.steps.desc")),1),s("div",Y,[s("label",Z,l(e.$t("publish.form.type_label")),1),s("div",K,[(d(),n(E,null,I(V,i=>s("div",{class:"col-6 col-md-3",key:i},[a(s("input",{type:"radio",class:"btn-check",id:"t-"+i,value:i,"onUpdate:modelValue":t[1]||(t[1]=S=>o.category=S)},null,8,ss),[[q,o.category]]),s("label",{class:"btn btn-outline-primary w-100 rounded-pill",for:"t-"+i},l(e.$t(`publish.types.${i}`)),9,es)])),64))])]),s("div",ts,[s("label",ls,l(e.$t("publish.form.title_label")),1),a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=i=>o.title=i),placeholder:e.$t("publish.form.title_ph")},null,8,os),[[m,o.title]])]),s("div",is,[s("label",ns,l(e.$t("publish.form.desc_label")),1),a(s("textarea",{class:"form-control",rows:"5","onUpdate:modelValue":t[3]||(t[3]=i=>o.desc=i),placeholder:e.$t("publish.form.desc_ph")},null,8,ds),[[m,o.desc]])]),s("div",as,[s("label",cs,l(e.$t("publish.form.upload_label")),1),s("div",rs,[t[13]||(t[13]=s("i",{class:"bi bi-cloud-arrow-up fs-2 text-muted"},null,-1)),s("p",us,l(e.$t("publish.form.upload_hint")),1)])])]),s("button",{class:"btn btn-primary w-100 rounded-pill py-3 fw-bold shadow-sm",onClick:x},l(e.$t("publish.btn_next")),1)])):(d(),n("div",bs,[s("div",ps,[s("h5",ms,"2. "+l(e.$t("publish.step2.mode_title")),1),s("div",hs,[s("div",_s,[s("div",{class:$(["mode-select-card",{active:o.mode==="normal"}]),onClick:t[4]||(t[4]=i=>o.mode="normal")},[s("div",vs,[t[14]||(t[14]=s("div",{class:"icon-circle bg-light"},[s("i",{class:"bi bi-person"})],-1)),s("div",null,[s("div",fs,l(e.$t("publish.modes.normal.title")),1),s("div",gs,l(e.$t("publish.modes.normal.desc")),1)])]),o.mode==="normal"?(d(),n("i",ws)):p("",!0)],2)]),s("div",ks,[s("div",{class:$(["mode-select-card",{active:o.mode==="contest"}]),onClick:t[5]||(t[5]=i=>o.mode="contest")},[s("div",$s,[t[15]||(t[15]=s("div",{class:"icon-circle bg-warning text-white"},[s("i",{class:"bi bi-trophy"})],-1)),s("div",null,[s("div",ys,l(e.$t("publish.modes.contest.title")),1),s("div",Vs,l(e.$t("publish.modes.contest.desc")),1)])]),o.mode==="contest"?(d(),n("i",xs)):p("",!0)],2)])])]),s("div",Cs,[s("h5",Us,"3. "+l(e.$t("publish.steps.budget")),1),o.mode==="normal"?(d(),n("div",Ts,[s("div",Ss,[s("label",Fs,l(e.$t("publish.step2.budget_label"))+" (Â¥)",1),a(s("input",{type:"number",class:"form-control form-control-lg fw-bold text-primary","onUpdate:modelValue":t[6]||(t[6]=i=>o.budget=i),placeholder:"0.00"},null,512),[[m,o.budget,void 0,{number:!0}]]),s("div",Ms,l(e.$t("publish.step2.budget_hint")),1)])])):(d(),n("div",Ps,[s("div",js,[s("small",null,[t[16]||(t[16]=s("i",{class:"bi bi-info-circle-fill"},null,-1)),b(" "+l(e.$t("publish.step2.contest_alert")),1)])]),s("div",Ns,[s("div",Bs,[s("label",Ds,l(e.$t("publish.step2.total_budget"))+" (Â¥)",1),a(s("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=i=>o.budget=i)},null,512),[[m,o.budget,void 0,{number:!0}]])]),s("div",Es,[s("label",Is,l(e.$t("publish.step2.max_people")),1),a(s("select",{class:"form-select","onUpdate:modelValue":t[8]||(t[8]=i=>o.maxPeople=i)},[t[17]||(t[17]=s("option",{value:"3"},"3",-1)),s("option",qs,"5 ("+l(e.$t("publish.step2.recommend"))+")",1),t[18]||(t[18]=s("option",{value:"10"},"10",-1))],512),[[z,o.maxPeople,void 0,{number:!0}]])])]),s("div",zs,[s("div",Rs,[s("span",null,l(e.$t("publish.step2.pool_entry"))+" (60%)",1),s("span",As,[b("Â¥ "+l((o.budget*.6).toFixed(0))+" ",1),s("span",Hs,"("+l(e.$t("publish.step2.per_person"))+" Â¥"+l((o.budget*.6/o.maxPeople).toFixed(0))+")",1)])]),s("div",Ls,[s("span",null,"ðŸ† "+l(e.$t("publish.step2.pool_winner"))+" (40%)",1),s("span",Xs,"Â¥ "+l((o.budget*.4).toFixed(0)),1)])])])),s("div",Gs,[s("div",Js,[s("label",Os,l(e.$t("publish.step2.deadline")),1),u(T,{modelValue:o.deadline,"onUpdate:modelValue":t[9]||(t[9]=i=>o.deadline=i),type:"date",placeholder:e.$t("publish.step2.deadline_ph"),style:{width:"100%"}},null,8,["modelValue","placeholder"])])]),s("div",Qs,[a(s("input",{class:"form-check-input",type:"checkbox",id:"urgentSwitch","onUpdate:modelValue":t[10]||(t[10]=i=>o.isUrgent=i)},null,512),[[R,o.isUrgent]]),s("label",Ws,l(e.$t("publish.step2.urgent_opt")),1)]),s("div",Ys,[t[19]||(t[19]=s("input",{class:"form-check-input",type:"checkbox",id:"expertSwitch",checked:""},null,-1)),s("label",Zs,l(e.$t("publish.step2.expert_opt")),1)])]),s("button",{class:"btn btn-link text-muted w-100 text-decoration-none mb-5",onClick:t[11]||(t[11]=i=>c.value=0)},l(e.$t("publish.btn_back")),1)]))]),_:1})]),c.value===1?(d(),n("div",Ks,[s("div",se,[s("div",null,[s("div",ee,l(e.$t("publish.footer.total_label")),1),s("div",te,"Â¥ "+l(f.value.toFixed(2)),1)]),s("button",{class:"btn btn-primary rounded-pill px-5 py-3 fw-bold shadow",onClick:C,disabled:r.value},[r.value?(d(),n("span",oe)):p("",!0),b(" "+l(r.value?e.$t("publish.footer.submitting"):e.$t("publish.footer.btn_pay")),1)],8,le)])])):p("",!0)])}}},ae=F(ie,[["__scopeId","data-v-216f11f5"]]);export{ae as default};
