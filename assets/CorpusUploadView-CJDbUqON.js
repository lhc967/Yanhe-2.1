import{_ as I,u as w,a as V,c as v,d as l,t as o,f as m,e as B,H as U,I as D,n as u,D as g,F as b,r as i,$ as E,E as M,p as R,h as T,i as f,l as z}from"./index-CVi_qNo8.js";const F={class:"corpus-upload-page"},L={class:"upload-nav"},N={class:"terminal-container"},H={class:"status-bar"},j={class:"record-section"},q={class:"visualizer"},A={class:"timer"},G={class:"hint"},J={class:"meta-form"},K={class:"form-group"},O=["placeholder"],P={class:"form-group"},Q=["placeholder"],W={class:"form-group"},X={class:"tags"},Y=["disabled"],Z={__name:"CorpusUploadView",setup(x){const{t:p}=w(),_=T(),$=V(),n=i(!1),d=i(0),c=i(null),r=i(!1),y=i(null),e=i({location:"",meaning:"",type:"daily"}),h=R(()=>r&&e.value.location&&e.value.meaning),k=()=>{n.value?(n.value=!1,clearInterval(c.value),r.value=!0,y.value=new Blob(["mock_audio_data"],{type:"audio/mp3"})):(n.value=!0,d.value=0,r.value=!1,c.value=setInterval(()=>d.value++,1e3))},C=s=>{const a=Math.floor(s/60).toString().padStart(2,"0"),t=(s%60).toString().padStart(2,"0");return`${a}:${t}`},S=()=>{const s=E.service({text:p("upload.loading_text"),background:"rgba(0,0,0,0.8)"});setTimeout(()=>{s.close(),M.success(p("upload.success_msg")),_.back()},1500)};return(s,a)=>(f(),v("div",F,[l("nav",L,[l("button",{onClick:a[0]||(a[0]=t=>s.$router.back())},[...a[6]||(a[6]=[l("i",{class:"bi bi-x-lg"},null,-1)])]),l("span",null,o(s.$t("upload.title")),1),a[7]||(a[7]=l("div",{style:{width:"24px"}},null,-1))]),l("div",N,[l("div",H,[l("span",null,[a[8]||(a[8]=l("i",{class:"bi bi-wifi"},null,-1)),m(" "+o(s.$t("upload.db_connected")),1)]),l("span",null,"ID: "+o(B($).userInfo.name||s.$t("upload.guest_id")),1)]),l("div",j,[l("div",q,[(f(),v(U,null,D(20,t=>l("div",{class:"bar",key:t,style:z({height:n.value?Math.random()*100+"%":"10%"})},null,4)),64))]),l("div",A,o(C(d.value)),1),l("button",{class:u(["record-main-btn",{recording:n.value}]),onClick:k},[l("i",{class:u(["bi",n.value?"bi-stop-fill":"bi-mic-fill"])},null,2)],2),l("p",G,o(n.value?s.$t("upload.recording_hint"):s.$t("upload.start_hint")),1)]),l("div",J,[l("div",K,[l("label",null,o(s.$t("upload.form.location_label")),1),g(l("input",{placeholder:s.$t("upload.form.location_placeholder"),"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.location=t)},null,8,O),[[b,e.value.location]])]),l("div",P,[l("label",null,o(s.$t("upload.form.meaning_label")),1),g(l("input",{placeholder:s.$t("upload.form.meaning_placeholder"),"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.meaning=t)},null,8,Q),[[b,e.value.meaning]])]),l("div",W,[l("label",null,o(s.$t("upload.form.tags_label")),1),l("div",X,[l("span",{class:u(["tag",{active:e.value.type==="daily"}]),onClick:a[3]||(a[3]=t=>e.value.type="daily")},o(s.$t("upload.tags.daily")),3),l("span",{class:u(["tag",{active:e.value.type==="nursery"}]),onClick:a[4]||(a[4]=t=>e.value.type="nursery")},o(s.$t("upload.tags.nursery")),3),l("span",{class:u(["tag",{active:e.value.type==="slang"}]),onClick:a[5]||(a[5]=t=>e.value.type="slang")},o(s.$t("upload.tags.slang")),3)])])]),l("button",{class:"upload-confirm-btn",onClick:S,disabled:!h.value},[a[9]||(a[9]=l("i",{class:"bi bi-cloud-upload"},null,-1)),m(" "+o(s.$t("upload.btn_submit")),1)],8,Y)])]))}},al=I(Z,[["__scopeId","data-v-26d16786"]]);export{al as default};
