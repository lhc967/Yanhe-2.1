import{_ as T,u as U,a as V,c,d as t,f as D,t as a,n as L,l as R,D as f,F as b,e as E,j as N,k as x,T as B,r as n,E as p,p as M,h as W,i as u,C as j,$ as z}from"./index-CVi_qNo8.js";const A={class:"writer-paper-page"},F={class:"desk-nav"},q={class:"back-text"},H={class:"nav-center"},O={class:"status-text"},P={class:"nav-right"},Y={class:"seal-inner"},G={class:"paper-container"},J={class:"cover-mask"},K={key:1,class:"cover-placeholder"},Q={class:"writing-area"},X=["placeholder"],Z={class:"author-line"},ee={class:"date"},te={class:"name"},se={class:"editor-box"},ae=["placeholder"],ne=["title"],oe={class:"brush-tip"},ie={__name:"StoryWriterView",setup(re){const{t:r,locale:h}=U(),w=W(),k=V(),d=n(""),o=n(""),v=n(""),l=n(!0),g=n(null),m=n(null),y=M(()=>{const e=new Date;return h.value==="en"?e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`}),_=()=>{l.value=!1;const e=g.value;e.style.height="auto",e.style.height=e.scrollHeight+"px"},$=()=>m.value.click(),C=e=>{const s=e.target.files[0];s&&(v.value=URL.createObjectURL(s))},I=()=>{const e=z.service({text:r("writer.msg.ai_loading"),background:"rgba(244, 240, 230, 0.8)",customClass:"ink-loading"});setTimeout(()=>{e.close();const s=h.value==="en"?`

(AI Continuation) The wind at this moment seems to carry echoes of a thousand years, blowing through ancient streets...`:`

(AI 续写) 此刻的风仿佛也带着千年的回响，穿过古老的街巷，吹动了檐角的风铃。我驻足良久，想起一句古诗...`;o.value+=s,_(),p.success(r("writer.msg.ai_done"))},1500)},S=()=>{if(!d.value||!o.value)return p.warning(r("writer.msg.validate_error"));document.querySelector(".publish-seal-btn").classList.add("stamping"),setTimeout(()=>{p.success(r("writer.msg.success")),w.push("/story")},1e3)};return(e,s)=>(u(),c("div",A,[t("nav",F,[t("div",{class:"nav-left",onClick:s[0]||(s[0]=i=>e.$router.back())},[t("span",q,[s[4]||(s[4]=t("i",{class:"bi bi-chevron-left"},null,-1)),D(" "+a(e.$t("writer.nav.back")),1)])]),t("div",H,[t("span",{class:L(["status-dot",{saved:l.value}])},null,2),t("span",O,a(l.value?e.$t("writer.nav.status_saved"):e.$t("writer.nav.status_writing")),1)]),t("div",P,[t("button",{class:"publish-seal-btn",onClick:S},[t("span",Y,a(e.$t("writer.nav.publish")),1)])])]),t("div",G,[t("div",{class:"cover-section",onClick:$},[t("input",{type:"file",ref_key:"coverInput",ref:m,hidden:"",onChange:C},null,544),v.value?(u(),c("div",{key:0,class:"cover-img",style:R({backgroundImage:`url(${v.value})`})},[t("div",J,a(e.$t("writer.cover.change")),1)],4)):(u(),c("div",K,[s[5]||(s[5]=t("i",{class:"bi bi-image"},null,-1)),t("span",null,a(e.$t("writer.cover.add")),1)]))]),t("div",Q,[f(t("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>d.value=i),class:"ink-title",placeholder:e.$t("writer.editor.title_ph"),onInput:s[2]||(s[2]=i=>l.value=!1)},null,40,X),[[b,d.value]]),t("div",Z,[t("span",ee,a(y.value),1),s[6]||(s[6]=t("span",{class:"divider"},"/",-1)),t("span",te,a(E(k).userInfo.name||e.$t("writer.msg.anonymous"))+" "+a(e.$t("writer.editor.author_suffix")),1)]),t("div",se,[f(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=i=>o.value=i),class:"ink-content",placeholder:e.$t("writer.editor.content_ph"),ref_key:"textareaRef",ref:g,onInput:_},null,40,ae),[[b,o.value]]),N(B,{name:"fade"},{default:x(()=>[o.value.length>0?(u(),c("div",{key:0,class:"ai-brush-float",onClick:I,title:e.$t("writer.editor.ai_btn")},[s[7]||(s[7]=t("i",{class:"bi bi-pen-fill"},null,-1)),t("span",oe,a(e.$t("writer.editor.ai_tip")),1)],8,ne)):j("",!0)]),_:1})])])])]))}},ce=T(ie,[["__scopeId","data-v-fbdb156b"]]);export{ce as default};
