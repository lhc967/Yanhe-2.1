import{_ as C,u as I,a as L,L as $,o as B,c as l,d as e,w as x,f as D,t as i,H as y,I as T,D as A,F as H,G as S,a0 as V,q as R,r as u,i as n,n as h,C as k,e as E}from"./index-CVi_qNo8.js";const Y={class:"chat-page"},j={class:"navbar fixed-top navbar-custom px-4"},q={class:"container-fluid"},z={class:"fw-bold"},F={class:"container chat-container"},K={class:"card border-0 shadow-sm overflow-hidden chat-card"},N={class:"row g-0 h-100"},G={class:"col-lg-3 col-md-4 border-end contact-sidebar"},U={class:"p-3 border-bottom bg-light"},O={class:"input-group"},J=["placeholder"],P={class:"contact-list custom-scrollbar"},Q=["onClick"],W={class:"position-relative"},X=["src"],Z={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger border border-light"},ee={class:"contact-info"},te={class:"d-flex justify-content-between align-items-center"},se={class:"mb-0 fw-bold text-truncate"},ae={class:"text-muted",style:{"font-size":"11px"}},ie={class:"mb-0 text-muted small text-truncate"},oe={class:"col-lg-9 col-md-8 d-flex flex-column h-100"},le={class:"chat-header p-3 border-bottom d-flex justify-content-between align-items-center"},ne={class:"d-flex align-items-center gap-3"},re=["src"],de={class:"mb-0 fw-bold"},ce={key:0,class:"d-flex align-items-center gap-1"},ue={class:"text-primary small"},me={key:1,class:"text-muted"},ve={class:"dropdown"},pe={class:"dropdown-menu dropdown-menu-end"},he={class:"dropdown-item",href:"#"},ge={class:"dropdown-item text-danger",href:"#"},be={key:0,class:"text-center my-3"},_e={class:"badge bg-light text-secondary fw-normal"},fe=["src"],we={class:"msg-content"},xe={class:"input-area p-3 border-top"},ye={class:"d-flex gap-2 align-items-end"},Te={class:"flex-grow-1 position-relative"},ke=["onKeyup","placeholder"],Me={__name:"ChatView",setup(Ce){const{t:Ie,locale:p}=I(),g=R(),M=L(),m=u(null),r=u(""),d=u([]),o=u({}),c=u([]),b=()=>{const t=p.value==="en";d.value=[{id:1,name:t?"AllBright Law Firm":"锦天城律师事务所",role:t?"Employer · Verified":"雇主 · 企业认证",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Law",lastMsg:t?"Are you familiar with Contract Law?":"请问您对合同法熟悉吗？",time:"10:30",unread:2,isTyping:!1},{id:2,name:t?"YanHe Service":"言禾官方客服",role:t?"Official Support":"官方客服",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=YanHe",lastMsg:t?"Your verification is approved.":"您的实名认证已通过审核。",time:t?"Yday":"昨天",unread:0,isTyping:!1},{id:3,name:t?"Lily (Alumni)":"李同学",role:t?"Alumni · German Dept":"校友 · 德语系",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lily",lastMsg:t?"Thanks senior!":"好的，谢谢学长！",time:t?"Mon":"周一",unread:0,isTyping:!1}];const s=o.value.id||d.value[0].id;o.value=d.value.find(a=>a.id===s)||d.value[0],o.value.id===1?c.value=[{id:1,isMe:!1,text:t?"Hello, I am the HR from AllBright.":"你好，我是锦天城律所的HR。",time:"10:28",showTime:!0},{id:2,isMe:!1,text:t?"I saw your resume, your legal English background fits our needs.":"我看过你的简历，你的法律英语背景很符合我们的要求。",time:"10:29",showTime:!1},{id:3,isMe:!0,text:t?"Hi! Thank you. I hold a CATTI Level 2 certificate and minored in International Business Law.":"您好！非常感谢您的认可。我有 CATTI 二级笔译证书，并且辅修过国际商法。",time:"10:30",showTime:!1},{id:4,isMe:!1,text:t?"Are you familiar with Contract Law?":"请问您对合同法熟悉吗？",time:"10:30",showTime:!1}]:c.value=[]};$(p,()=>{b()});const _=t=>{o.value=t,t.unread=0,t.id!==1&&(c.value=[]),v()},v=()=>{V(()=>{m.value&&(m.value.scrollTop=m.value.scrollHeight)})},f=()=>{if(!r.value.trim())return;c.value.push({id:Date.now(),isMe:!0,text:r.value,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),showTime:!1});const t=r.value;r.value="",v(),o.value.isTyping=!0,setTimeout(()=>{o.value.isTyping=!1;const s=p.value==="en"?`Received. Regarding "${t}", let's discuss details.`:`收到，关于"${t}"这部分细节，我们可以再详细沟通一下。`;c.value.push({id:Date.now()+1,isMe:!1,text:s,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),showTime:!1}),v()},2e3)};return B(()=>{if(b(),v(),g.query.targetId){const t=d.value.find(s=>s.id==g.query.targetId);t&&_(t)}}),(t,s)=>(n(),l("div",Y,[e("nav",j,[e("div",q,[e("a",{class:"navbar-brand d-flex align-items-center",onClick:s[0]||(s[0]=x(a=>t.$router.push("/portal"),["prevent"])),href:"#"},[s[2]||(s[2]=e("i",{class:"bi bi-chevron-left text-dark me-2"},null,-1)),D(" "+i(t.$t("chat.nav_back")),1)]),e("div",z,i(t.$t("chat.title")),1),s[3]||(s[3]=e("div",{style:{width:"80px"}},null,-1))])]),e("div",F,[e("div",K,[e("div",N,[e("div",G,[e("div",U,[e("div",O,[s[4]||(s[4]=e("span",{class:"input-group-text bg-white border-end-0"},[e("i",{class:"bi bi-search text-muted"})],-1)),e("input",{type:"text",class:"form-control border-start-0 ps-0",placeholder:t.$t("chat.search_placeholder")},null,8,J)])]),e("div",P,[(n(!0),l(y,null,T(d.value,a=>(n(),l("div",{key:a.id,class:h(["contact-item",{active:o.value.id===a.id}]),onClick:w=>_(a)},[e("div",W,[e("img",{src:a.avatar,class:"rounded-circle contact-avatar"},null,8,X),a.unread>0?(n(),l("span",Z,i(a.unread),1)):k("",!0)]),e("div",ee,[e("div",te,[e("h6",se,i(a.name),1),e("small",ae,i(a.time),1)]),e("p",ie,i(a.lastMsg),1)])],10,Q))),128))])]),e("div",oe,[e("div",le,[e("div",ne,[e("img",{src:o.value.avatar,class:"rounded-circle",width:"40",height:"40"},null,8,re),e("div",null,[e("h6",de,i(o.value.name),1),o.value.isTyping?(n(),l("div",ce,[s[5]||(s[5]=e("div",{class:"typing-indicator"},[e("span"),e("span"),e("span")],-1)),e("span",ue,i(t.$t("chat.typing")),1)])):(n(),l("small",me,i(o.value.role),1))])]),e("div",ve,[s[6]||(s[6]=e("button",{class:"btn btn-light btn-sm rounded-circle",type:"button","data-bs-toggle":"dropdown"},[e("i",{class:"bi bi-three-dots-vertical"})],-1)),e("ul",pe,[e("li",null,[e("a",he,i(t.$t("chat.menu_profile")),1)]),e("li",null,[e("a",ge,i(t.$t("chat.menu_report")),1)])])])]),e("div",{class:"message-area flex-grow-1 p-4 custom-scrollbar",ref_key:"messageBox",ref:m},[(n(!0),l(y,null,T(c.value,(a,w)=>(n(),l("div",{key:w},[a.showTime?(n(),l("div",be,[e("span",_e,i(a.time),1)])):k("",!0),e("div",{class:h(["message-row",{me:a.isMe}])},[e("img",{src:a.isMe?E(M).userInfo.avatar:o.value.avatar,class:"msg-avatar rounded-circle"},null,8,fe),e("div",we,[e("div",{class:h(["msg-bubble",a.isMe?"bg-primary text-white":"bg-light text-dark"])},i(a.text),3)])],2)]))),128))],512),e("div",xe,[e("div",ye,[s[8]||(s[8]=e("button",{class:"btn btn-light rounded-circle text-muted"},[e("i",{class:"bi bi-paperclip"})],-1)),s[9]||(s[9]=e("button",{class:"btn btn-light rounded-circle text-muted"},[e("i",{class:"bi bi-emoji-smile"})],-1)),e("div",Te,[A(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),onKeyup:S(x(f,["prevent"]),["enter"]),class:"form-control border-0 bg-light",rows:"1",style:{resize:"none","border-radius":"20px",padding:"10px 15px"},placeholder:t.$t("chat.input_placeholder")},null,40,ke),[[H,r.value]])]),e("button",{class:"btn btn-primary rounded-circle shadow-sm",style:{width:"45px",height:"45px"},onClick:f},[...s[7]||(s[7]=[e("i",{class:"bi bi-send-fill"},null,-1)])])])])])])])])]))}},$e=C(Me,[["__scopeId","data-v-28f10e06"]]);export{$e as default};
